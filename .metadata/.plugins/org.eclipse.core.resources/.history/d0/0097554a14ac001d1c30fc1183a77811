<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="video">

	<!-- <insert id="insert" parameterType="hashMap" useGeneratedKeys="true" keyProperty="VIDEO_ID">  
		<![CDATA[
		insert into VIDEO (VIDEO_ID, TITLE, SUMMARY, VIDEO_URL, IMAGE_URL, CREATE_COUNTRY, CREATE_YEAR, GRADE) 
		values (#{video_id}, #{title}, #{summary}, #{v_url},#{i_url}, #{country}, #{year}, #{grade})
		]]>
	</insert>  --> 
	
	<!-- 비디오  전체조희 쿼리문  -->
	<!-- <select id="list" parameterType="hashMap" resultType="hashMap">
		<![CDATA[
		select v.VIDEO_ID, v.TITLE, v.IMAGE_URL, v.VIDEO_URL, c.CATEGORY_ID 
          from VIDEO v 
          join VIDEO_CATEGORY c
            on v.VIDEO_ID = c.VIDEO_ID 
         where 1=1
           and (c.CATEGORY_ID = 1 or c.CATEGORY_ID = 2 or c.CATEGORY_ID = 3)
		]]>
	</select>  -->
	
	<select id="list" resultType="com.test.test1.video.dto.VideoDto">
		<![CDATA[
		select v.VIDEO_ID, v.TITLE, v.VIDEO_URL, v.IMAGE_URL, c.CATEGORY_ID
  		  from VIDEO v
  		  join VIDEO_CATEGORY c
  		    on v.VIDEO_ID = c.VIDEO_ID
  		 where 1=1
  		   and (c.CATEGORY_ID = 1 or c.CATEGORY_ID = 2 or c.CATEGORY_ID = 3)
		]]>
	</select> 
	 
	<!--  비디오 상세 조희 쿼리문 -->
	<!-- <select id="detail" resultType="com.test.test1.video.dto.VideoDto">
		<![CDATA[
		select TITLE, VIDEO_URL, IMAGE_URL, SUMMARY, CREATE_COUNTRY, CREATE_YEAR, GRADE
		  from VIDEO
		 where VIDEO_ID=#{video_id}
		]]>
	</select>  -->
	
	<select id="detail" resultType="com.test.test1.video.dto.VideoDto">
	<![CDATA[
		select v.TITLE, v.VIDEO_URL, v.IMAGE_URL, v.SUMMARY, v.CREATE_COUNTRY, v.CREATE_YEAR, v.GRADE, a.`ACTOR_NAME(KOR)`
  from VIDEO v
  join VIDEO_ACTOR va
  on v.VIDEO_ID = va.VIDEO_ID
  join ACTOR a
  on va.ACTOR_ID = a.ACTOR_ID
    		 where VIDEO_ID=#{video_id}
 		]]>
	</select>
	  
	
</mapper>